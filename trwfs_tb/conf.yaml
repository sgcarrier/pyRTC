

wfc:
  name: "ALPAO"
  serial: "BOL106"
  numActuators: 97
  numModes: 97
  flatFile: "res/modal_best_flat.npy" 
  saveFile: "res/save.npy" 
  m2cFile:  "res/M2C_KL_97.npy" 
  floatingActuatorsFile: "res/floating_actuators.npy"
  floatingInfluenceRadius: 1
  affinity: 5
  commandCap: 0.4
  hardwareDelay: 0.001 #seconds
  frameDelay: 0
  functions:
  - sendToHardware

dmpsf:
  name: "DMPSF"
  index: 0
  serial: "12270103"
  width: 480
  height: 640
  darkCount: 1000
  integration: 100
  exposure: 500
  bitDepth: 16
  affinity: 3
  functions:
  - expose
  - integrate
  


modpsf:
  name: "MODPSF"
  index: 1
  serial: "12210161"
  width: 480
  height: 640
  darkCount: 1000
  darkFile: "res/modpsf_dark_29_05_2024.npy"
  integration: 100
  exposure: 500
  bitDepth: 16
  affinity: 3
  functions:
  - expose
  - integrate

  
fsm:
  name: 'E-517'
  libFolder: './'
  digitalFreq: 25000 #Hz, fixed from andor
  frequency: 16 #Hz, tuned by user
  amplitude: 2.5
  relativeAmplitude: 0.7763 # calculated by user
  numOfTRFrames: 48
  modLambdaFactor: 1
  offsetX: 5
  offsetY: 5
  maxValue: 7
  minValue: 3
  phaseOffset: 0
  servosOn: False
  autoZero: False



wfs:
  name: ANDOR_IXON
  idx: 0
  #binning: 1 #2
  exposure: 0.01
  #gain: 0
  #bitDepth: 10
  #left: 416 #208
  #top: 280 #140
  width: 128
  height: 128 
  darkCount: 1000
  darkFile: "res/andor_dark.npy"
  affinity: 3
  functions:
  - expose


shwfs:
  name: HASO4
  idx: 0
  #binning: 1 #2
  exposure: 1000
  #gain: 0
  #bitDepth: 10
  #left: 416 #208
  #top: 280 #140
  width: 494
  height:  659
  darkCount: 0
  darkFile: "" #"dark.npy"
  confFile: "c:\\Program Files\\Imagine Optic\\Configuration Files\\WFS_HASO4_first_7418.dat"
  affinity: 3
  functions:
  - expose


#slopes:
#  type: SHWFS
#  signalType: slopes
#  refSlopesFile: ""
#  validSubApsFile: ""
#  subApSpacing: 15.4375 
#  subApOffsetX: 18 #20
#  subApOffsetY: 16 #17
#  imageNoise: 0.5
#  contrast: 20
#  affinity: 4
#  functions:
#  - computeSignal

slopes:
  type: PYWFS
  signalType: slopes
  affinity: 4
  flatNorm: True
  #Specify where the pupils are and how large for a PYWFS
  pupilsRadius: 17
  pupils:
  - 21,22
  - 106,22
  - 21,107  
  - 106,107
  functions:
  - computeSignal


loop:
  gain: 0.1
  numDroppedModes: 0
  pokeAmp: 0.001 #
  numItersIM: 5
  affinity: 2
  method: push-pull
  functions:
  - standardIntegrator